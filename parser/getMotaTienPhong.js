var listMotaTienPhong =
    [
        {
            linkCategory: "http://www.tienphong.vn/rss/xa-hoi-2.rss",
            category: "Xã hội",
            linkNews: "http://www.tienphong.vn",
        },
        {
            linkCategory: "http://www.tienphong.vn/rss/xa-hoi-tin-tuc-104.rss",
            category: "Tin tức",
            linkNews: "http://www.tienphong.vn",
        },
        {
            linkCategory:
                "http://www.tienphong.vn/rss/xa-hoi-tra-nong-tra-da-114.rss", category:
            "Trà nóng - Trà đá", linkNews:
            "http://www.tienphong.vn",
        },
        {
            linkCategory:
                "http://www.tienphong.vn/rss/xa-hoi-chuyen-hom-nay-18.rss", category:
            "Chuyện hôm nay", linkNews:
            "http://www.tienphong.vn",
        },
        {
            linkCategory:
                "http://www.tienphong.vn/rss/xa-hoi-phong-su-13.rss", category:
            "Phóng sự", linkNews:
            "http://www.tienphong.vn",
        },
        {
            linkCategory: "http://www.tienphong.vn/rss/kinh-te-3.rss",
            category: "Kinh tế",
            linkNews: "http://www.tienphong.vn",
        },
        {
            linkCategory: "http://www.tienphong.vn/rss/kinh-te-thi-truong-24.rss", category:
            "Thị trường", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory: "http://www.tienphong.vn/rss/kinh-te-doanh-nghiep-22.rss",
            category: "Doanh nghiệp",
            linkNews: "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/kinh-te-doanh-nhan-165.rss", category:
            "Doanh nhân", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/kinh-te-chung-khoan-105.rss", category:
            "Chứng khoán", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/dia-oc-166.rss", category: "Địa ốc", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory: "http://www.tienphong.vn/rss/do-thi-269.rss", category:
            "Đô thị", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/thi-truong-270.rss", category:
            "Thị trường", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/nha-dep-phong-thuy-271.rss", category:
            "Nhà đẹp - Phong thuỷ", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/goc-chuyen-gia-272.rss", category:
            "Góc chuyên gia", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/dia-oc-media-169.rss", category:
            "Media", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/the-gioi-5.rss", category: "Thế giới", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory: "http://www.tienphong.vn/rss/the-gioi-phan-tich-binh-luan-31.rss", category:
            "Phân tích - Bình luận", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/the-gioi-nguoi-viet-nam-chau-183.rss", category:
            "Người Việt năm châu", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/chuyen-la-32.rss", category:
            "Chuyện lạ", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/gioi-tre-4.rss", category: "Giới trẻ", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory: "http://www.tienphong.vn/rss/gioi-tre-nhip-song-27.rss", category:
            "Nhịp sống", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/gioi-tre-viec-lam-102.rss", category:
            "Việc làm", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/gioi-tre-doan-tuoi-tre-25.rss", category:
            "Đoàn và tuổi trẻ", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/phap-luat-12.rss", category: "Pháp luật", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory: "http://www.tienphong.vn/rss/ban-tin-113-231.rss", category:
            "Bản tin 113", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/phap-luat-chuyen-toa-173.rss", category:
            "Pháp đình", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/the-thao-11.rss", category: "Thể thao", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory: "http://www.tienphong.vn/rss/the-thao-bong-da-49.rss", category:
            "Bóng đá", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/the-thao-hau-truong-111.rss", category:
            "Hậu trường", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/van-nghe-7.rss", category: "Văn nghệ", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory: "http://www.tienphong.vn/rss/so-bui-262.rss", category:
            "Sổ bụi", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/mat-nham-mat-mo-263.rss", category:
            "Mắt nhắm mắt mở", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/cau-chuyen-van-hoa-264.rss", category:
            "Câu chuyện văn hóa", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/giai-tri-36.rss", category: "Giải trí", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory: "http://www.tienphong.vn/rss/giai-tri-sao-35.rss", category:
            "Sao", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/giai-tri-hau-truong-168.rss", category:
            "Hậu trường", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/giao-duc-71.rss", category: "Giáo dục", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory: "http://www.tienphong.vn/rss/tuyen-sinh2011-163.rss", category:
            "Tuyển sinh", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/giao-duc-du-hoc-40.rss", category:
            "Du học", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/cong-nghe-45.rss", category: "Khoa học", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory: "http://www.tienphong.vn/rss/cong-nghe-khoa-hoc-46.rss", category:
            "Công nghệ", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/cong-nghe-vi-tinh-170.rss", category:
            "Vi tính", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/cong-nghe-dien-thoai-171.rss", category:
            "Điện thoại", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory:
                "http://www.tienphong.vn/rss/xe-113.rss", category:
            "Xe", linkNews:
            "http://www.tienphong.vn",
        }
        ,
        {
            linkCategory: "http://www.tienphong.vn/rss/hanh-trang-nguoi-linh-182.rss", category: "Người lính", linkNews:
            "http://www.tienphong.vn",
        }
        ,

    ]
var urlRssToJsonObj = require("../mymodule/urlRssToJsonObj")
var motangan = require('../mongo/moTa')
module.exports = function () {
    for (indexCate in listMotaTienPhong) {
        var itemCate = listMotaTienPhong[indexCate]

        function callback_urlRssToJsonObj(jsonObj, linkXMl) {
            try {
                var linkCate = linkXMl
                var listMoTa = jsonObj.rss.channel[0].item
                console.log(linkCate);
                // console.log(jsonObj);
                // console.log(jsonObj.rss.channel[0]);
                // console.log(listMoTa[0].title[0]);
                console.log(listMoTa[0].link[0]);
                // console.log(listMoTa[0].description[0]);
                console.log(listMoTa[0].description[0].split(`/></a>`)[1].split(`<div`)[0]);
                // console.log(listMoTa[0].description[0].split(`src="`)[1].split(`"`)[0]);
                // console.log(listMoTa[0]);
                // console.log(listMoTa[0].description[0].split(`src="`)[1].split('"')[0]);
                // console.log(jsonObj.rss.channel[0].item.length);
                for (indexMota in listMoTa) {
                    var itemMota = listMoTa[indexMota]
                    //     console.log(itemMota.description[0].split(`src=\'`)[1].split(`'`)[0]);
                    try {
                        var objMota = {
                            linkCategory: linkCate,
                            linkContents: itemMota.link[0],
                            title: itemMota.title[0],
                            description: itemMota.description[0].split(`/></a>`)[1].split(`<div`)[0],
                            img: itemMota.description[0].split(`src="`)[1].split(`"`)[0],
                        }
                        if (objMota.description == null) objMota.description = ""
                        // console.log(objMota);
                        motangan.insertOne(objMota, {linkContents: itemMota.link[0]});
                    } catch (e) {
                        console.log(e);
                    }
                }
            } catch (e) {

                console.log(e);
                console.log(jsonObj);
            }
        }

        urlRssToJsonObj(itemCate.linkCategory, callback_urlRssToJsonObj)
    }
}






