var listCateThanhNien =    [        {            category: "Trang chủ",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/home.rss"        },        {            category: "Thời sự",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/chinh-tri-xa-hoi.rss"        },        {            category: "Chào buổi sáng",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/chao-buoi-sang.rss"        },        {            category: "Pháp luật",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/phap-luat.rss"        },        {            category: "Trọng án",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/phap-luat/trong-an.rss"        },        {            category: "Quốc phòng",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/quoc-phong.rss"        },        {            category: "Độc quyền",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/chinh-tri-xa-hoi/doc-quyen.rss"        },        {            category: "Tình huống",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/T%C3%ACnh%20hu%E1%BB%91ng.rss"        },        {            category: "Việc làm",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/viec-lam.rss"        },        {            category: "Cần biết",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/viec-lam/can-biet.rss"        },        {            category: "Nghề hot",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/viec-lam/nghe-hot.rss"        },        {            category: "Kỹ năng tìm việc",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/viec-lam/ky-nang-tim-viec.rss"        },        {            category: "Tuyển dụng",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/viec-lam/tuyen-dung.rss"        },        {            category: "Săn việc",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/viec-lam/san-viec.rss"        },        {            category: "Tôi viết",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/toi-viet.rss"        },        {            category: "Blog phóng viên",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/toi-viet/blog-phong-vien.rss"        },        {            category: "Thế giới",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/the-gioi.rss"        },        {            category: "Người Việt năm châu",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/the-gioi/nguoi-viet-nam-chau.rss"        },        {            category: "Góc nhìn",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/the-gioi/goc-nhin.rss"        },        {            category: " Hồ sơ",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/the-gioi/ho-so.rss"        },        {            category: "Hậu trường",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/the-gioi/hau-truong.rss"        },        {            category: "Quân sự",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/the-gioi/quan-su.rss"        },        {            category: "Văn hóa",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/van-hoa-nghe-thuat.rss"        },        {            category: "Truyền hình",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/truyen-hinh.rss"        },        {            category: "Điện ảnh",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/van-hoa-nghe-thuat/dien-anh.rss"        },        {            category: "Câu chuyện văn hóa",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/van-hoa/cau-chuyen.rss"        },        {            category: "Sáng tác",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/van-hoa/sang-tac.rss"        },        {            category: "Thể thao",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thethao.thanhnien.vn/rss/home.rss"        },        {            category: "Bóng đá Việt Nam",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thethao.thanhnien.vn/rss/bong-da-viet-nam.rss"        },        {            category: "Bóng đá Quốc tế",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thethao.thanhnien.vn/rss/bong-da-quoc-te.rss"        },        {            category: "Bình luận",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thethao.thanhnien.vn/rss/binh-luan.rss"        },        {            category: "Quần vợt",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thethao.thanhnien.vn/rss/quan-vot.rss"        },        {            category: "Hậu trường",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thethao.thanhnien.vn/rss/hau-truong.rss"        },        {            category: "Thể Thao khác",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thethao.thanhnien.vn/rss/toan-canh-the-thao.rss"        },        {            category: "Đời sống",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/doi-song.rss"        },        {            category: "Ẩm thực",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/doi-song/am-thuc.rss"        },        {            category: "Dân sinh",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/doi-song/phong-cach-song.rss"        },        {            category: "Gia đình",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/doi-song/gia-dinh.rss"        },        {            category: "Giao thông",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/doi-song/giao-thong.rss"        },        {            category: "Quyền được biết",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/doi-song/quyen-duoc-biet.rss"        },        {            category: " Cộng đồng",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/doi-song/cong-dong.rss"        },        {            category: "Viết về Phú Mỹ Hưng",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/doi-song/viet-ve-phu-my-hung.rss"        },        {            category: "Kinh doanh",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/kinh-te.rss"        },        {            category: "Địa ốc",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/nha-dat.rss"        },        {            category: "Tiêu dùng",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/kinh-te/tieu-dung.rss"        },        {            category: "Làm giàu",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/kinh-doanh/dau-tu.rss"        },        {            category: "Chính sách",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/kinh-te/chinh-sach.rss"        },        {            category: "Giới trẻ",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/the-gioi-tre.rss"        },        {            category: "Sống - Yêu - Ăn - Chơi",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/the-gioi-tre/song-yeu-an-choi.rss"        },        {            category: "Thế giới mạng",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/the-gioi-tre/the-gioi-mang.rss"        },        {            category: "Kết nối",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/the-gioi-tre/ket-noi.rss"        },        {            category: "Khởi nghiệp",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/the-gioi-tre/khoi-nghiep.rss"        },        {            category: "Giáo dục",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/giao-duc.rss"        },        {            category: "Du học",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/giao-duc/du-hoc.rss"        },        {            category: "Tuyển sinh",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/giao-duc/tuyen-sinh.rss"        },        {            category: "Tra cứu điểm 2016",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/diem-thi-2016.rss"        },        {            category: "Du học Hà Lan",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/du-hoc-ha-lan.rss"        },        {            category: "Chọn nghề",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/giao-duc/chon-nghe.rss"        },        {            category: "Người thầy",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/giao-duc/nguoi-thay.rss"        },        {            category: "Chọn trường",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/giao-duc/chon-truong.rss"        },        {            category: "Tuyển sinh 2016",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/giao-duc/tuyen-sinh/2016.rss"        },        {            category: "Tuyển sinh 2017",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/giao-duc/tuyen-sinh/2017.rss"        },        {            category: "Hộp thư Tư vấn 24/7",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/giao-duc/hop-thu-tu-van-24-7.rss"        },        {            category: "Công nghệ",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/cong-nghe-thong-tin.rss"        },        {            category: "Sản phẩm mới",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/cong-nghe-thong-tin/san-pham-moi.rss"        },        {            category: "Kinh Nghiệm",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/cong-nghe-thong-tin/kinh-nghiem.rss"        },        {            category: "Ý tưởng",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/cong-nghe-thong-tin/y-tuong.rss"        },        {            category: "Game",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://game.thanhnien.vn/rss/home.rss"        },        {            category: "Tin tức",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://game.thanhnien.vn/rss/tin-tuc.rss"        },        {            category: "Lịch thi đấu",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://game.thanhnien.vn/rss/game/schedule.rss"        },        {            category: "Đánh giá",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://game.thanhnien.vn/rss/danh-gia-phong-su.rss"        },        {            category: "Thủ thuật",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://game.thanhnien.vn/rss/thu-thuat.rss"        },        {            category: "Phòng máy",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://game.thanhnien.vn/rss/game/center.rss"        },        {            category: "Công nghệ game",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://game.thanhnien.vn/rss/cong-nghe.rss"        },        {            category: "Cộng đồng",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://game.thanhnien.vn/rss/cong-dong.rss"        },        {            category: "Video game",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://game.thanhnien.vn/rss/video.rss"        },        {            category: "Sức khỏe",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/doi-song/suc-khoe.rss"        },        {            category: "Làm đẹp",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/doi-song/lam-dep.rss"        },        {            category: "Giới tính",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/doi-song/gioi-tinh.rss"        },        {            category: "Khoảnh khắc nghề y",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/suc-khoe/khoanh-khac-nghe-y.rss"        },        {            category: "Khoẻ đẹp mỗi ngày",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://thanhnien.vn/rss/suc-khoe/khoe-dep-moi-ngay.rss"        },        {            category: "Xe",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://xe.thanhnien.vn/rss/home.rss"        },        {            category: "Thị trường",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://xe.thanhnien.vn/rss/tin-tuc.rss"        },        {            category: "Tư vấn",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://xe.thanhnien.vn/rss/tu-van.rss"        },        {            category: "Đánh giá xe",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://xe.thanhnien.vn/rss/danh-gia-xe.rss"        },        {            category: "Khám phá",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://xe.thanhnien.vn/rss/kham-pha.rss"        },        {            category: "Video xe",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://xe.thanhnien.vn/rss/clip.rss"        },        {            category: "Diễn đàn xe",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://xe.thanhnien.vn/rss/dien-dan.rss"        },        {            category: "Video",            linkNews: "http://thanhnien.vn/",            linkCategory: "http://video.thanhnien.vn/rss/home.rss"        },    ]var motangan = require('../mongo/moTa')var xmlToJsonObj = require("../mymodule/xmlToJsonObj");var request = require("request")var http = require("http"),    zlib = require("zlib");module.exports = function () {    // var url = "http://thanhnien.vn/rss/T%C3%ACnh%20hu%E1%BB%91ng.rss"    function getGzipped(url, callback) {        // buffer to store the streamed decompression        var buffer = [];        http.get(url, function (res) {            // pipe the response into the gunzip to decompress            var gunzip = zlib.createGunzip();            res.pipe(gunzip);            gunzip.on('data', function (data) {                // decompression chunk ready, add it to the buffer                buffer.push(data.toString())            }).on("end", function () {                // response and decompression complete, join the buffer and return                callback(null, buffer.join(""));            }).on("error", function (e) {                callback(e);            })        }).on('error', function (e) {            callback(e)        });    }    function callback_xmlToJsonObj(objJson) {        try {            var linkCate = objJson.rss.channel[0][`atom:link`][0].$.href            var listMota = objJson.rss.channel[0].item            for (indexMota in listMota) {                var itemMota = listMota[indexMota]                try {                    var objMota = {                        linkCategory: linkCate,                        linkContents: itemMota.description[0].split("href=&quot;")[1].split("&quot;&gt;")[0],                        title: itemMota.title[0],                        description: itemMota.description[0].split("a&gt;")[1].split("&lt;")[0],                        img: itemMota.description[0].split(`src=&quot;`)[1].split(`&`)[0].split(`?`)[0],                    }                    if (objMota.description == null) objMota.description = ""                    // console.log(objMota);                    motangan.insertOne(objMota, {linkContents: objMota.linkContents});                } catch (e) {                    console.log(e);                }            }        } catch (e) {        }    }    for (indexCate in listCateThanhNien) {        itemCate = listCateThanhNien[indexCate]        // console.log(itemCate.linkCategory)        try {            getGzipped(itemCate.linkCategory, function (err, data) {                xmlToJsonObj(data, callback_xmlToJsonObj)            });        } catch (ex) {        }    }    // function callback_urlRssToJsonObj(jsonObj, linkXMl) {    //     try {    //         var linkCate = linkXMl    //         // var listMoTa = jsonObj.rss.channel[0].item    //         // console.log(jsonObj.rss.channel[0]);    //         console.log(jsonObj);    //         // console.log(listMoTa[0].description[0].split(`src="`)[1].split('"')[0]);    //         // console.log(jsonObj.rss.channel[0].item.length);    //         // for (indexMota in listMoTa) {    //         //     var itemMota = listMoTa[indexMota]    //         //     //     console.log(itemMota.description[0].split(`src=\'`)[1].split(`'`)[0]);    //         //     try {    //         //         var objMota = {    //         //             linkCategory: linkCate,    //         //             linkContents: itemMota.link[0],    //         //             title: itemMota.title[0],    //         //             description: itemMota.description[0].split(`<br />`)[1],    //         //             img: itemMota.description[0].split(`src="`)[1].split('"')[0],    //         //         }    //         //         if (objMota.description == null) objMota.description = ""    //         //         console.log(objMota);    //         //         motangan.insertOne(objMota, {linkContents: itemMota.link[0]});    //         //     } catch (e) {    //         //         console.log(e);    //         //     }    //         // }    //     } catch (e) {    //    //         console.log(e);    //         // console.log(jsonObj);    //     }    // }    // console.log(itemCate.linkCategory);    // urlRssToJsonObj(itemCate.linkCategory, callback_urlRssToJsonObj)    // }}